{"version":3,"sources":["components/theme.ts","components/Button.ts","components/Input.ts","components/Textarea.ts","components/Github.tsx","wss/Log.tsx","wss/index.tsx","decorators/computed.ts","models/ws-logger.ts","models/ws.ts","App.tsx","index.tsx"],"names":["theme","typography","fontSize","fontFamily","default","color","backgroundColor","borderColor","borderRadius","focus","active","disabled","spacing","n","size","lineHeight","height","inputCss","base","hover","Button","styled","button","Input","input","TextArea","textarea","Svg","svg","GithubSvg","width","viewBox","version","fillRule","d","GithubLink","href","target","rel","props","fill","Warning","ArrowDown","ArrowUp","BinaryIcon","Wrapper","div","Row","isReq","css","isHeader","DataCol","InfoCol","LenCol","TimeCol","Err","span","Info","type","Channel","message","length","ts","useState","expanded","setExpanded","date","Date","ms","getMilliseconds","isBinary","fullMsg","setFullMsg","binMsg","setBinMsg","useEffect","a","arrayBuffer","abuf","view","Uint8Array","binary","map","i","toString","slice","join","text","replace","chrs","textEffect","onClick","s","substr","max","toShortString","toLocaleTimeString","num","String","pad","style","overflow","padding","Empty","Header","Log","source","key","Group","connectButtonWidth","UriInput","connected","ConnectButton","RequestTextArea","WSS","wss","model","uri","setUri","setMessage","log","useRxStateResult","log$","isConnected$","connect","tabIndex","placeholder","defaultValue","onChange","e","value","onKeyDown","keyCode","disconnect","send","clearLog","computed","propertyKey","descriptor","get","this","apply","WsLogger","events$","Subject","clearCommand$","next","connected$","pipe","req$$","req$","req","now","res$$","res$","res","error","isWsError","code","reason","events$$","skip","merge","scan","acc","val","BehaviorSubject","current$","subscriptions","serializer","t","deserializer","data","webSocket","url","openObserver","push","subscribe","console","complete","isStopped","unsubscribe","forEach","subscription","closed","Error","H1","h1","App","className","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bb4454d7.chunk.js","sourcesContent":["const space = 4;\n\nexport const theme = {\n    typography: {\n        fontSize: 14,\n        fontFamily: `'Ubuntu', sans-serif`\n    },\n    default: {\n        color: 'white',\n        backgroundColor: 'black',\n        borderColor: '#d9d9d9',\n        borderRadius: space\n    },\n    focus: {\n        color: 'white',\n        borderColor: '#40a9ff'\n    },\n    active: {\n        color: '#096dd9',\n        borderColor: '#096dd9'\n    },\n    disabled: {\n        color: 'grey',\n        backgroundColor: '#444444'\n    },\n    spacing: (n: number) => n * space,\n    size: {\n        lineHeight: '1.5',\n        height: 8 * space\n    }\n};\n\nexport const inputCss = {\n    base:`\n        background-image: none;\n        background-color: ${theme.default.backgroundColor};\n        border: 1px solid ${theme.default.borderColor};\n        border-radius: ${theme.spacing(1)}px;\n        box-sizing: border-box;\n        color: ${theme.default.color};\n        font-family: ${theme.typography.fontFamily};\n        font-size: ${theme.typography.fontSize}px;\n        height: ${theme.size.height}px;\n        line-height: ${theme.size.lineHeight};\n        margin: ${theme.spacing(1)}px;\n        outline: 0;\n        transition: all .3s cubic-bezier(.645, .045, .355, 1);\n    `,\n    active: `\n        color: ${theme.active.color};\n        border-color: ${theme.active.borderColor};\n    `, \n    \n    hover: `\n        color: ${theme.focus.color};\n        border-color: ${theme.focus.borderColor};\n    `,\n\n    focus: `\n        color: ${theme.focus.color};\n        border-color: ${theme.focus.borderColor};\n        border-style: dashed;\n    `,\n\n    disabled: `\n        color: ${theme.disabled.color};\n        background-color: ${theme.disabled.backgroundColor}\n    `\n};\n\nexport default theme;\n","import theme, { inputCss } from './theme';\nimport styled from 'styled-components';\n\nexport const Button = styled.button`\n    ${inputCss.base}\n    cursor: pointer;\n    padding: 0 ${theme.spacing(3)}px;\n    text-align: center;\n\n    :active {\n        ${inputCss.active}\n    }\n\n    :hover(not:disabled) {\n        ${inputCss.hover}\n    }\n\n    :focus {\n        ${inputCss.focus}\n    }\n\n    :disabled {\n        ${inputCss.disabled}\n    }\n`;\n","import theme, { inputCss } from './theme';\nimport styled from 'styled-components';\n\nexport const Input = styled.input`\n    ${inputCss.base}\n    padding: 0 ${theme.spacing(1)}px;\n    text-align: left;\n\n    :active {\n        ${inputCss.active}\n    }\n\n    :hover(not:disabled) {\n        ${inputCss.hover}\n    }\n\n    :focus {\n        ${inputCss.focus}\n    }\n\n    :disabled {\n        ${inputCss.disabled}\n    }\n`\n","import theme, { inputCss } from './theme';\nimport styled from 'styled-components';\n\nexport const TextArea = styled.textarea`\n    ${inputCss.base}\n    height: ${theme.spacing(2 * theme.typography.fontSize)}px;\n    padding: ${theme.spacing(1)}px;\n    text-align: left;\n\n    :active {\n        ${inputCss.active}\n    }\n\n    :hover(not:disabled) {\n        ${inputCss.hover}\n    }\n\n    :focus {\n        ${inputCss.focus}\n    }\n\n    :disabled {\n        ${inputCss.disabled}\n    }\n`\n","import React from 'react';\nimport theme from './theme';\nimport styled from 'styled-components';\n\nexport interface GithubSvgParams {\n    width: number;\n    height: number;\n}\n\nconst Svg = styled.svg`\n    fill: ${theme.default.color};\n    transition: fill .3s cubic-bezier(.645, .045, .355, 1);\n    vertical-align: bottom;\n\n    :hover {\n        fill: ${theme.focus.color};\n    }\n`\n\nconst GithubSvg = ({ width, height }: GithubSvgParams) => (\n    <Svg \n        width={width} \n        height={height} \n        viewBox=\"0 0 16 16\" \n        version=\"1.1\">\n        <path \n            fillRule=\"evenodd\" \n            d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\">\n        </path>\n    </Svg>\n)\n\nexport interface GithubLinkProps {\n    href: string;\n}\n\nexport function GithubLink({href}: GithubLinkProps) {\n    const size = theme.size.height + theme.spacing(1);\n    return (\n        <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n            <GithubSvg \n                width={size} \n                height={size}/>\n        </a>\n    );\n}\n","import React, {useState, useEffect} from 'react';\nimport styled, { css } from 'styled-components';\nimport { LogMessage } from '../models/ws-logger';\nimport { theme } from '../components';\n\nconst Svg = styled.svg`\n    fill: ${props => props.fill || theme.default.color};\n    vertical-align: text-top;\n    padding: 2px 0;\n`\n\nexport interface SvgParams {\n    width: number;\n    height: number;\n}\n\nconst Warning = ({ width, height }: SvgParams) => (\n    <Svg \n        fill=\"#00ffed\"\n        width={width} \n        height={height} \n        viewBox=\"0 0 14.317642211914062 14.059268951416016\" \n        version=\"1.1\">\n        <path \n            fillRule=\"evenodd\" \n            d=\"M7.4.03a7 7 0 1 0 .002 13.999A7 7 0 0 0 7.4.03zm0 11a.751.751 0 1 1 .003-1.502.751.751 0 0 1-.002 1.502zm.75-3.75a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 1.5 0v3.5z\">\n        </path>\n    </Svg>\n)\n\nconst ArrowDown = ({ width, height }: SvgParams) => (\n    <Svg \n        fill='#0ffd0f'\n        width={width} \n        height={height} \n        viewBox=\"0 0 12 13\" \n        version=\"1.1\">\n        <path \n            fillRule=\"evenodd\" \n            d=\"M4 7V0h4v7h4l-6 6-6-6z\">\n        </path>\n    </Svg>\n)\n\nconst ArrowUp = ({ width, height }: SvgParams) => (\n    <Svg \n        fill='red'\n        width={width} \n        height={height} \n        viewBox=\"0 0 12 13\" \n        version=\"1.1\">\n        <path \n            fillRule=\"evenodd\" \n            d=\"M4 6v7h4V6h4L6 0 0 6z\">\n        </path>\n    </Svg>\n)\n\nconst BinaryIcon = ({ width, height }: SvgParams) => (\n    <Svg\n        fill='white'\n        width={width} \n        height={height} \n        viewBox={`-1 0 512 512`} \n        version=\"1.1\">\n        <path d=\"m195 362h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m75 482h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/><path d=\"m475 362h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m355 482h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/><path d=\"m195 181h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m75 301h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/><path d=\"m335 181h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m495 301h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/><path d=\"m55 0h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m215 120h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/><path d=\"m475 0h-20c-19.300781 0-35 15.699219-35 35v80c0 19.300781 15.699219 35 35 35h20c19.300781 0 35-15.699219 35-35v-80c0-19.300781-15.699219-35-35-35zm5 115c0 2.757812-2.242188 5-5 5h-20c-2.757812 0-5-2.242188-5-5v-80c0-2.757812 2.242188-5 5-5h20c2.757812 0 5 2.242188 5 5zm0 0\"/><path d=\"m355 120h-15v-105c0-8.285156-6.714844-15-15-15h-30c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h15v90h-15c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15zm0 0\"/>\n    </Svg>\n)\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n`\n\ninterface RowProps {\n    isReq?: boolean;\n    isHeader?: boolean;\n}\n\nconst Row = styled.div`\n    display: flex;\n    border-bottom: 1px solid green;\n    line-height: 20px;\n    ${(props: RowProps) => props.isReq && css`\n        color: #eeff00;\n        background-color: #274c22;\n    `}\n    ${(props: RowProps) => props.isHeader && css`\n        height: 24px;\n        line-height: 24px;\n        background-color: black;\n    `}\n`;\n\nconst DataCol = styled.div`\n    flex: 1;\n`;\n\nconst InfoCol = styled.div`\n    width: 20px;\n`;\n\nconst LenCol = styled.div`\n    width: 100px;\n`;\n\nconst TimeCol = styled.div`\n    width: 120px;\n`;\n\nexport interface LogProps {\n    source: LogMessage[];\n}\n\ninterface MessageProps<Message> {\n    type: string,\n    message: Message,\n    length: number,\n    ts: number\n}\n\nconst Err = styled.span`\n    color: red;\n`\n\nfunction pad(num: number, size: number) {\n    var s = String(num);\n    while (s.length < (size || 2)) {s = \"0\" + s;}\n    return s;\n}\n\n\nfunction Info({type}: {type: string}) {\n    const size = { width: 16, height: 16};\n    switch (type) {\n        case 'req': return <ArrowUp {...size}/>;\n        case 'res': return <ArrowDown {...size}/>;\n        case 'event': return <Warning {...size}/>;\n        case 'error': return <Err>ER</Err>;\n        default: return null;\n    }\n}\n\nfunction toShortString<Message>(message: Message): string {\n    const s: string = (message as any).toString();\n    const max = 50;\n    if (s.length > max) {\n        return s.substr(0, max - 3) + '...';\n    }\n    return s;\n}\n\nfunction Channel<Message>({type, message, length, ts}: MessageProps<Message>) {\n    const [expanded, setExpanded] = useState(false);\n    const isReq = type === 'req';\n    const date = new Date(ts);\n    const ms = date.getMilliseconds();\n    const isBinary = typeof message === 'object';\n    const [fullMsg, setFullMsg] = useState<string | null>(null);\n    const [binMsg, setBinMsg] = useState<string | null>(null);\n    useEffect(() => {\n        if (isBinary) {\n            const textEffect = async() => {\n                const abuf = await (message as any).arrayBuffer() as ArrayBuffer;\n                const view = new Uint8Array(abuf);\n                const binary = (view as any).map((i: number) => ('0' + i.toString(16)).slice(-2)).join('');\n                const text = await (message as any).text();\n                setBinMsg('0x' + binary.replace(/.{4}/g, (chrs: string) => ' ' + chrs));\n                setFullMsg(text);\n            };\n            textEffect();\n        } else {\n            setFullMsg(`${message}`);\n        }\n    }, [message, isBinary]);\n    return (\n        <>\n            <Row isReq={isReq}>\n                <InfoCol><Info type={type}/></InfoCol>\n                <DataCol onClick={() => setExpanded(!expanded)}>\n                    {isBinary && <><BinaryIcon width={14} height={14}/>{' '}</>}\n                    {fullMsg && toShortString(fullMsg)}\n                </DataCol>\n                <LenCol>{type === 'req' || type === 'res'? (isBinary? (message as unknown as Blob).size: length): '--'}</LenCol>\n                <TimeCol><small>{date.toLocaleTimeString()}</small>.<strong>{pad(ms, 3)}</strong></TimeCol>\n            </Row>\n            {expanded && <>\n                <Row isReq={isReq}>\n                    <pre style={{overflow: 'auto', padding: 20}}>\n                        {binMsg && <small style={{color: 'aquamarine'}}>{binMsg}</small>}\n                        {binMsg && <br/>}\n                        {fullMsg}\n                    </pre>\n                </Row>\n            </>}\n        </>\n    )\n}\n\nfunction Empty() {\n    return (\n        <Row>\n            <DataCol>--</DataCol>\n            <LenCol>--</LenCol>\n            <TimeCol>--</TimeCol>\n        </Row>\n    )\n}\n\nfunction Header() {\n    return (\n        <Row isHeader>\n            <DataCol>Data</DataCol>\n            <LenCol>Length</LenCol>\n            <TimeCol>Time</TimeCol>\n        </Row>\n    )\n}\n\nexport function Log<Message>({source}: LogProps) {\n    return (\n        <Wrapper>\n            <Header/>\n            {source.length === 0 && <Empty/>}\n            {source.length > 0 && source.map(({type, message, ts}) => {\n                return <Channel key={ts} type={type} message={message} length={(message as any).length} ts={ts}/>;\n            })}\n        </Wrapper>\n    );\n}\n","import React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport WsLogger from '../models/ws-logger';\nimport { useRxStateResult } from '@reonomy/reactive-hooks';\nimport { theme, Button, Input, TextArea } from '../components';\nimport { Log } from './Log';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n`\n\nconst Group = styled.div`\n    display: flex;\n    position: relative;\n`;\n\ninterface UriInputProps {\n    connected: boolean\n}\n\nconst connectButtonWidth = theme.spacing(30);\n\nconst UriInput = styled(Input)`\n    flex: 1;\n    padding-right: ${connectButtonWidth}px;\n    ${({connected}: UriInputProps) => connected && css`\n        color: #eeff00;\n        background-color: #274c22;\n    `}\n`;\n\nconst ConnectButton = styled(Button)`\n    border-radius: 0 ${theme.spacing(1)}px ${theme.spacing(1)}px 0;\n    position: absolute;\n    right: 0;\n    width: ${connectButtonWidth}px;\n`;\n\nconst RequestTextArea = styled(TextArea)`\n    flex: 1;\n`;\n\nexport interface WssProps<Message> {\n    model: WsLogger<Message>\n}\n\nfunction WSS({model: wss}:  WssProps<string>) {\n    const [uri, setUri] = useState('wss://echo.websocket.org');\n    const [message, setMessage] = useState('');\n    const log = useRxStateResult(wss.log$) || [];\n    const connected = useRxStateResult(wss.isConnected$) || false;\n\n    const connect = () => wss.connect({ uri })\n    const disconnect = () => wss.disconnect();\n    const send = () => wss.send(message);\n    const clear = () => wss.clearLog();\n\n    return (\n        <Wrapper>\n            <Group>\n                <UriInput \n                    tabIndex={1} \n                    type=\"text\" \n                    placeholder=\"ws://...\" \n                    defaultValue={uri} \n                    connected={connected} \n                    onChange={e => setUri(e.target.value)}\n                    onKeyDown={e => e.keyCode === 13 && connect()} />\n                <ConnectButton \n                    tabIndex={2} \n                    type=\"button\" \n                    onClick={connected? disconnect: connect}>\n                    {connected? 'Disconnect': 'Connect'}\n                </ConnectButton>\n            </Group>\n            <Group>\n                <RequestTextArea \n                    tabIndex={3} \n                    placeholder=\"Request payload\" \n                    onChange={e => setMessage(e.target.value)}/>\n                \n            </Group>\n            <Group>\n                <Button \n                    tabIndex={4} \n                    disabled={!connected} \n                    type=\"button\" \n                    onClick={send}>\n                    Send\n                </Button>\n                <Button \n                    tabIndex={5} \n                    type=\"button\" \n                    onClick={clear}>\n                    Clear\n                </Button>\n            </Group>\n            <Group>\n                <Log source={log} />\n            </Group>\n        </Wrapper>\n    );\n}\n\nexport default WSS;","export function computed<T>(\n    target: any,\n    propertyKey: string,\n    descriptor: TypedPropertyDescriptor<T>\n  ) {\n    const get = descriptor.get;\n    descriptor.get = function getLazy() {\n      const that = this as any;\n      if (!that[`__${propertyKey}`] && get) {\n        that[`__${propertyKey}`] = get.apply(that);\n      }\n      return that[`__${propertyKey}`] as T;\n    };\n  }\n","import { Subject, Observable } from 'rxjs';\nimport { scan, merge, map, skip } from 'rxjs/operators';\nimport { computed } from '../decorators/computed';\nimport Ws, { WsError } from './ws'\n\nexport interface LogMessage {\n    type: 'req' | 'res' | 'error' | 'event',\n    ts: number,\n    message: string,\n}\n\nfunction isWsError<Message>(res: Message | WsError): res is WsError {\n    return typeof (res as WsError).error !== 'undefined';\n}\n\nexport default class WsLogger<Message> extends Ws<Message> {\n    private events$ = new Subject<LogMessage>();\n\n    private clearCommand$ = new Subject<'clear'>()\n    /**\n     * Cleans up current log.\n     */\n    public clearLog() {\n        this.clearCommand$.next('clear');\n    }\n\n    @computed public get isConnected$(): Observable<boolean> {\n        return this.connected$.pipe(map(({connected}) => connected));\n    }\n\n    @computed public get uri$(): Observable<string | void> {\n        return this.connected$.pipe(map(({uri}) => uri));\n    }\n\n    @computed public get log$() {\n        const req$$ = this.req$.pipe(map(req => ({ type: 'req' as 'req', ts: Date.now(), message: `${req}` })));\n        const res$$ = this.res$.pipe(map(res => {\n            if (isWsError(res)) {\n                return { type: 'error' as 'error', ts: Date.now(), message: `code: ${res.error.code} reason: '${res.error.reason}'` };\n            }\n            return { type: 'res' as 'res', ts: Date.now(), message: res as any };\n        }));\n        const events$$ = this.connected$.pipe(\n            skip(1),\n            map(({connected, uri}) => ({\n            type: 'event' as 'event',\n            ts: Date.now(),\n            message: connected? `${uri} [connected]`: `${uri? (uri + ' '): ''}[disconnected]`\n        })));\n\n        return req$$.pipe(\n            merge(res$$),\n            merge(events$$),\n            merge(this.clearCommand$),\n            scan((acc: LogMessage[], val: LogMessage | 'clear') => {\n                if (val === 'clear') return [];\n                return [...acc, val]\n            }, [])\n        )\n    }\n}\n","import { Subject, Subscription, BehaviorSubject } from 'rxjs';\nimport { webSocket, WebSocketSubject } from 'rxjs/webSocket';\nimport { WebSocketMessage } from 'rxjs/internal/observable/dom/WebSocketSubject';\n\nexport interface Connection {\n    uri?: string;\n    connected: boolean;\n}\n\nexport interface ConnectionConfig<Message> {\n    uri: string;\n    serializer?: (value: Message) => WebSocketMessage;\n    deserializer?: (event: MessageEvent) => Message;\n}\n\nexport interface WsError {\n    error: {\n        code: number;\n        reason: string;\n    }\n}\n\n/**\n * Base model for WebSockets.\n */\nexport default class Ws<Message> {\n    protected req$ = new Subject<Message>();\n    protected res$ = new Subject<Message | WsError>();\n    protected connected$ = new BehaviorSubject<Connection>({ connected: false });\n\n    private current$: WebSocketSubject<Message> | null = null;\n    private subscriptions: Subscription[] = [];\n\n    /**\n     * Connects to a given websocket.\n     * @param uri \n     */\n    public connect({uri, serializer = t => t as any, deserializer = (e: MessageEvent) => e.data}: ConnectionConfig<Message>) {\n        if (uri && uri.length > 0) {\n            this.disconnect();\n            this.current$ = webSocket<Message>({\n                url: uri, \n                serializer, \n                deserializer,\n                openObserver: {\n                    next: () => this.connected$.next({uri, connected: true})\n                }\n            });\n\n            this.subscriptions.push(this.req$.subscribe(this.current$));\n            this.subscriptions.push(this.current$.subscribe({\n                next: data => this.res$.next(data),\n                error: (error) => {\n                    console.error(error);\n                    this.res$.next({error: {\n                        code: error.code,\n                        reason: error.reason\n                    }});\n                    this.disconnect();\n                },\n                complete: () => this.disconnect()\n            }));\n        }\n    }\n\n    /**\n     * Disconnects from the active websocket.\n     */\n    public disconnect() {\n        if (this.current$) {\n            const isStopped = this.current$.isStopped;\n            this.current$.unsubscribe();\n            this.current$.complete();\n            this.subscriptions.forEach(subscription => subscription.unsubscribe());\n            this.subscriptions = [];\n\n            if (!isStopped) {\n                this.connected$.next({...this.connected$.value, connected: false});\n            }\n        }\n    }\n\n    /**\n     * Sends a message to a websocket.\n     * @param message \n     */\n    public send(message: Message) {\n        if (!this.current$ || this.current$.closed) {\n            throw new Error(\"Websocket is not connected.\")\n        }\n        this.req$.next(message);\n    }\n}\n","import React from 'react';\nimport WSS from './wss';\nimport WsLogger from './models/ws-logger';\nimport { theme } from './components';\nimport styled from 'styled-components';\nimport { GithubLink } from './components';\n\nconst H1 = styled.h1`\n  margin: ${theme.spacing(1)}px;\n  color: white;\n`\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <H1><GithubLink href=\"https://github.com/ddoronin/yawc\"/> YAWC</H1>\n      <WSS model={new WsLogger<string>()}/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"./index.css\";\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}